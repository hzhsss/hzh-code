## 键盘事件

| 键盘事件   | 触发条件                                        |
| ---------- | ----------------------------------------------- |
| onkeyup    | 某个键盘按键被松开时触发                        |
| onkeydown  | 某个键盘按键被按下时触发                        |
| onkeypress | 某个键盘按键被按下时触发 ，不识别功能按键如ctrl |

执行顺序 onkeydown-onkeypress-onkeyup

### keycode属性

`e.keycode` 返回键盘按下键的 ASCII 码值 

注意 keyup 和 keydowm 不区分大小写

输入框案例

```js
var search = document.querySelector('input');
document.addEventListener('keyup',function(e){
    if(e.keyCode == 83){
       search.focus();
    }
});
```

放大显示案例

```js
var con = document.querySelector('.con');
var jd_input = document.querySelector('.jd');
//此处需要使用到keyup事件 因为在使用keydown时 值在事件中获取不到
jd_input.addEventListener('keyup',function(e){
    if(this.value == ''){
       con.style.display = 'none';
    } else {
        con.style.display = 'block';
        con.innerText = this.value;
    }
})
jd_input.addEventListener('blur',function(e){
    con.style.dispaly = 'none';
})
jd_input.addEventListener('focus',function(e){
    con.style.dispaly = 'block';
})
```

## BOM

BOM浏览器对象模型，提供了独立于内容而与浏览器窗口进行交互的对象，其核心对象是window

BOM 由一系列相关的对象构成，并且每个对象都提供了很多方法与属性，BOM缺乏标准

- 浏览器对象模型
- 顶级对象是 window
- 兼容性差

![](https://code.yuandehua.com/doc-img/BOM.png)

window 对象是浏览器的顶级对象，它具有双重角色

1. 它是 js 访问浏览器窗口的一个接口
2. 它是一个全局对象。定义在全局变量中的变量、函数都会变成 window 对象的属性和方法

window.name

## 常见事件

### 页面加载事件

`window.onload`  `load`

页面加载事件，当文档内容完全加载完成会触发该事件，调用处理函数

```js
//传统的注册事件方法 只能写一次可以使用addEventListener
window.onload = function(){
    btn.addEventListener('click',function(){
        alert('yuadh');
    });
}
window.addEventListener('load',function(){
    btn.addEventListener('click',function(){
        alert('yuadh');
    });
})
```

新属性 `DOMContentLoaded` 

仅当BOM加载完成，不包括样式表，图片 等

```js
document.addEventListener('DOMContentLoaded',function(){
    alert('first');
});
```

### 调整窗口大小事件

`window.onresize` 是调整窗口大小事件，当触发时就调用的处理函数

`window.innerWidth` 获取当前屏幕宽度

```js
window.addEventListener('resize',function(){
    if(window.innerWidth<=800){
       div.style.disply = 'none'
    } else {
         div.style.disply = 'block'
    }
})
```

## 定时器

`setTimeout(调用函数，[延迟的毫秒数])`

可以省略毫秒数

```js
setTimeout(function(){...},1000);
function fn(){...}
setTimeout(fn,1000);
//不推荐写法
setTimeout('fn()',1000);
```

回调函数 callback

### 清除定时器

`clearTimeout(timeoutID)`

```js
var btn = document.querySelector('button');
var timer = setTimeout(function(){
    console.log('yuadh');
},5000);
btn.addEventListener('click',function(){
    clearTimeout(timer);
})
```

案例

```js
var begin  = document.querySelector('.begin');
var stop = document.querySelector('.stop');
var timer = null;
begin.addEventListener('click',function(){
    timer = setIneterval(function(){
        console.log('yuadh');
    },1000);
})
stop.addEventListener('click',function(){
    clearInerval(timer);
})
```



### setInterval

`setInterval(回调函数,[间隔的秒速])`重复调用一个函数，每隔这个事件，就去调用一次回调函数

倒计时案例

```js
var hour = document.querySelector('.hour');
var minute = document.querySelector('.minute');
var second = document.querySelector('.second');
var inputTime = +newDate('xxx');//倒计时时间
countDown();//因为定时器有1s时间的延迟 所以需要先调用一次这个函数
setInterval(countDown,1000);
function countDown(time){
    var nowTime = +new Date();
    var times = (inputTime - nowTime)/1000;
    var h = parseInt(times/60/60%24);
    h = h<10?'0'+h:h;
    hour.innerHTML = h;
    var m = parseInt(times/60%60);
    m = m<10?'0'+m:m;
    minute.innerHTML = m;
    var s = parseInt(times%60);
    s = s<10?'0'+s:s;
    second.innerHTML = s;
}
```

<p class="codepen" data-height="300" data-default-tab="html,result" data-slug-hash="VwWVejW" data-editable="true" data-user="yuandehua" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/yuandehua/pen/VwWVejW">
  倒计时案例</a> by yuandehua (<a href="https://codepen.io/yuandehua">@yuandehua</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>



### 发送验证码案例

```js
var btn = docuemnt.querySelector('button');
var time = 3;
btn.addEventListener('click',function(){
    tbn.disabled = true;
    var timer = setInterval(function(){
        if(time = 0){
           clearInterval(timer);
            btn.disabled = false;
            btn.innerHTML = '发送';
            time = 3;
        } else {
            btn.innerHTML = '还剩下' + time-- + '秒';
        }
    },1000);
})
```





























